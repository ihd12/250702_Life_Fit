<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>자유게시판 목록</title>
    <link rel="stylesheet" href="/css/sidebar.css">
    <style>
        .active {
            font-weight: bold;
            color: red;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- 사이드바 -->
    <div class="sidebar" th:replace="fragments/sidebar :: aside"></div>
    <!--<div th:replace="fragments/guidePanel :: #guidePanel"></div>-->
    <div id="guidePanel" th:replace="fragments/guidePanel :: #guidePanel"></div>

    <!-- 본문 영역 -->
    <div class="content">
        <h1>자유게시판</h1>

        <!-- 버튼들 -->
        <button onclick="location.href='/topic'">주제게시판으로 이동</button>


        <!-- 검색 -->
        <form method="get" action="/free">
            <input type="text" name="keyword" placeholder="검색어 입력" th:value="${keyword}" />
            <select name="searchType">
                <option value="all" th:selected="${searchType == 'all'}">제목+내용</option>
                <option value="title" th:selected="${searchType == 'title'}">제목</option>
                <option value="content" th:selected="${searchType == 'content'}">내용</option>
            </select>
            <button type="submit">검색</button>
        </form>



        <!-- 게시판 목록 -->
        <table border="1" cellpadding="5" cellspacing="0">
            <thead>
            <tr>
                <th>번호</th>
                <th>제목</th>
                <th>내용</th>
                <th>작성일</th>
                <th>타입</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="board : ${responseDTO.dtoList}">
                <td th:text="${board.bno}">1</td>
                <td><a th:href="@{/board/{bno}(bno=${board.bno})}" th:text="${board.title}">제목</a></td>
                <td th:text="${board.content}">내용</td>
                <td th:text="${#temporals.format(board.regdate, 'yyyy-MM-dd HH:mm')}">날짜</td>
                <td th:text="${board.boardType}">FREE</td>
            </tr>
            </tbody>
        </table>

        <!-- 페이징 -->
        <div class="pagination">
            <a th:if="${responseDTO.prev}"
               th:href="@{${requestURI}(page=${responseDTO.start - 1}, size=${responseDTO.size}, keyword=${keyword}, searchType=${searchType})}">Prev</a>
            <span th:each="i : ${#numbers.sequence(responseDTO.start, responseDTO.end)}">
                <a th:href="@{${requestURI}(page=${i}, size=${responseDTO.size}, keyword=${keyword}, searchType=${searchType})}"
                   th:classappend="${i == responseDTO.page} ? 'active'">[[${i}]]</a>
            </span>
            <a th:if="${responseDTO.next}"
               th:href="@{${requestURI}(page=${responseDTO.end + 1}, size=${responseDTO.size}, keyword=${keyword}, searchType=${searchType})}">Next</a>
        </div>
        <button onclick="location.href='/write'">글쓰기</button>

    </div>
</div>
<script src="/js/guide.js"></script>

</body>

</html>
